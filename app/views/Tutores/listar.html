#{extends 'main.html' /}

<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top d-flex justify-content-between align-items-center px-4">
    <div class="d-flex align-items-center">
        <img src="@{'/public/images/logoB.png'}" alt="Logo" class="logo-img me-2">
    </div>
    <div>
        <a href="@{Application.paginaInicialAdmin()}" class="btn btn-primary custom-btn me-2">Página Inicial</a>
    </div>
</nav>


<!-- Campo de busca -->
<div class="form-busca-tutores">
  <form method="GET" action="@{Tutores.listar}">
    <input type="text" name="termo" value="${termo}" placeholder="Buscar por nome ou email" />
    <button type="submit">Pesquisar</button>
  </form>
  <a href="@{Tutores.form()}" class="btn btn-primary custom-btn">Cadastrar novo tutor</a>
</div>

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Nome</th>
      <th>Email</th>
      <th>Telefone</th>
	  <th>CPF</th>
      <th>Animais</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    #{list items:tutores, as:'t'}
      <tr>
        <td>${t.nome}</td>
        <td>${t.email}</td>
        <td>${t.telefone}</td>
		<td>${t.cpf}</td>
		<td>
		  #{if animaisPorTutor.get(t.id) && animaisPorTutor.get(t.id).size() > 0}
		    <ul>
		      #{list items:animaisPorTutor.get(t.id), as:'a'}
		        <li>${a.nome} (${a.especie})</li>
		      #{/list}
		    </ul>
		  #{/if}
		  #{if !animaisPorTutor.get(t.id) || animaisPorTutor.get(t.id).size() == 0}
		    Nenhum animal cadastrado.
		  #{/if}
		</td>
        <td>
		   
		   <a href="@{Tutores.detalhar(t)}">Detalhar</a> |
		   <a href="@{Tutores.remover(t.id)}" onclick="return confirm('Confirma exclusão?')">Excluir</a> |
		   <a href="@{Tutores.editar(t.id)}">Editar</a>
		   
        </td>
      </tr>
    #{/list}
  </tbody>
</table>

<br>
